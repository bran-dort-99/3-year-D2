<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Our 2025 together - D & D ðŸ’•</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;700;900&family=Lora:ital@0;1&display=swap"
        rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: #000;
            color: white;
            font-family: 'Inter', sans-serif;
        }

        /* Loading Screen */
        #loader {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            z-index: 2000;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            transition: opacity 0.8s ease;
        }

        #loader .loader-text {
            font-family: 'Inter', sans-serif;
            font-size: 10px;
            letter-spacing: 5px;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.5);
            margin-bottom: 20px;
        }

        #loader .loader-bar {
            width: 200px;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        #loader .loader-fill {
            height: 100%;
            width: 0%;
            background: white;
            transition: width 0.2s ease;
        }

        /* Deep Space Background */
        #background-canvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            background: linear-gradient(135deg, #000000 0%, #051937 100%);
            overflow: hidden;
        }

        .star {
            position: absolute;
            background: white;
            border-radius: 50%;
            opacity: 0.5;
            animation: twinkle var(--duration) infinite ease-in-out;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; transform: scale(1); }
            50% { opacity: 0.8; transform: scale(1.1); }
        }

        /* Splash Screen */
        #splash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: black;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: opacity 1s ease-in-out, visibility 1s;
            visibility: hidden;
            opacity: 0;
        }

        .splash-title {
            font-family: 'Inter', sans-serif;
            font-size: clamp(2rem, 8vw, 4rem);
            font-weight: 900;
            text-align: center;
            letter-spacing: -2px;
            opacity: 0;
            transform: scale(0.9);
            animation: popUp 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275) forwards;
            padding: 0 20px;
        }

        @keyframes popUp {
            to { opacity: 1; transform: scale(1); }
        }

        #viewport {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            perspective: 3000px;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }

        #revolver {
            position: relative;
            width: 380px;
            height: 270px;
            transform-style: preserve-3d;
        }

        .card {
            position: absolute;
            top: 0;
            left: 0;
            width: 380px;
            height: 270px;
            border-radius: 12px;
            backface-visibility: hidden;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            padding: 6px;
            box-sizing: border-box;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            transition: transform 0.6s cubic-bezier(0.23, 1, 0.32, 1);
            perspective: 1000px;
            cursor: pointer;
        }

        .card-flipper {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.8s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .card.flipped .card-flipper {
            transform: rotateY(180deg);
        }

        .card-front,
        .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            border-radius: 6px;
            overflow: hidden;
        }

        .card-back {
            transform: rotateY(180deg);
            background: transparent;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 25px;
            box-sizing: border-box;
        }

        .card-back-img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .card-back-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(2px);
            -webkit-backdrop-filter: blur(2px);
        }

        .card-back p {
            position: relative;
            z-index: 2;
            font-family: 'Lora', serif;
            font-style: italic;
            font-size: 16px;
            line-height: 1.7;
            color: rgba(255, 255, 255, 0.95);
            text-align: center;
            margin: 0;
            text-shadow: 0 2px 8px rgba(0, 0, 0, 0.6);
        }

        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(4px);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            z-index: 10;
            transition: background 0.3s;
        }

        .close-btn:hover {
            background: rgba(255, 255, 255, 0.4);
        }

        .close-btn::before,
        .close-btn::after {
            content: '';
            position: absolute;
            width: 12px;
            height: 1.5px;
            background: white;
            border-radius: 1px;
        }

        .close-btn::before { transform: rotate(45deg); }
        .close-btn::after { transform: rotate(-45deg); }

        .card-front img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: contrast(1.1);
            transition: transform 0.5s;
        }

        .card:hover .card-front img {
            transform: scale(1.05);
        }

        .card-label {
            position: absolute;
            bottom: 12px;
            right: 12px;
            font-family: 'Lora', serif;
            font-style: italic;
            font-size: 12px;
            color: rgba(255, 255, 255, 0.7);
            letter-spacing: 1px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.5);
        }

        .scroll-hint {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            opacity: 0;
            font-size: 11px;
            letter-spacing: 5px;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.6);
            transition: opacity 1.5s ease-in-out;
            background: rgba(0, 0, 0, 0.55);
            padding: 10px 28px 10px 48px;
            border-radius: 30px;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            cursor: default;
            z-index: 100;
        }

        .hint-close {
            position: absolute;
            left: 10px;
            top: 50%;
            transform: translateY(-50%);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background 0.3s;
        }

        .hint-close:hover {
            background: rgba(255, 255, 255, 0.4);
        }

        .hint-close::before,
        .hint-close::after {
            content: '';
            position: absolute;
            width: 10px;
            height: 1.5px;
            background: white;
        }

        .hint-close::before { transform: rotate(45deg); }
        .hint-close::after { transform: rotate(-45deg); }

        .flip-hint {
            position: fixed;
            bottom: 80px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            opacity: 0;
            font-size: 10px;
            letter-spacing: 3px;
            text-transform: uppercase;
            color: rgba(255, 255, 255, 0.5);
            transition: opacity 1.5s ease-in-out;
            background: rgba(0, 0, 0, 0.55);
            padding: 8px 24px 8px 44px;
            border-radius: 30px;
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            cursor: default;
            z-index: 100;
        }

        /* Mobile responsive */
        @media (max-width: 500px) {
            #revolver {
                width: 300px;
                height: 210px;
            }
            .card {
                width: 300px;
                height: 210px;
            }
            .card-back p {
                font-size: 13px;
                line-height: 1.5;
            }
            .card-back {
                padding: 18px;
            }
        }

        @media (max-width: 360px) {
            #revolver {
                width: 260px;
                height: 180px;
            }
            .card {
                width: 260px;
                height: 180px;
            }
            .card-back p {
                font-size: 11px;
            }
            .card-back {
                padding: 14px;
            }
        }
    </style>
</head>

<body>

    <!-- Loading Screen -->
    <div id="loader">
        <div class="loader-text">Cargando recuerdos...</div>
        <div class="loader-bar">
            <div class="loader-fill" id="loader-fill"></div>
        </div>
    </div>

    <div id="background-canvas"></div>

    <div id="splash">
        <h1 class="splash-title">Our 2025 together<br>D & D ðŸ’•</h1>
    </div>

    <div id="viewport">
        <div id="revolver"></div>
    </div>

    <div class="flip-hint" id="hint-flip">
        <div class="hint-close"></div>
        Haz clic en una foto para voltear
    </div>
    <div class="scroll-hint" id="hint-scroll">
        <div class="hint-close"></div>
        Desliza para explorar
    </div>

    <audio id="bgMusic" loop preload="none">
        <source src="../Bakar_-_Hell_N_Back.mp3" type="audio/mpeg">
    </audio>

    <script>
        // Resume audio
        (function () {
            const params = new URLSearchParams(window.location.search);
            const t = parseFloat(params.get('t'));
            const audio = document.getElementById('bgMusic');
            if (!isNaN(t)) {
                audio.currentTime = t;
                audio.play().catch(() => { });
            }
        })();

        // Generate Stars
        const bg = document.getElementById('background-canvas');
        const starCount = window.innerWidth < 500 ? 120 : 300;
        for (let i = 0; i < starCount; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            const size = (Math.random() * 2 + 1) + 'px';
            star.style.width = size;
            star.style.height = size;
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.setProperty('--duration', Math.random() * 3 + 2 + 's');
            star.style.animationDelay = Math.random() * 5 + 's';
            bg.appendChild(star);
        }

        const memories = [
            { id: 1, img: '../3-feb19-photos-optimized/1cueva.webp?v=3', caption: 'Encontramos el spot perfecto... lÃ¡stima que tus ojos me distrajeron de la vista.' },
            { id: 2, img: '../3-feb19-photos-optimized/2.webp?v=3', caption: 'La paz que solo encuentro a tu lado.' },
            { id: 3, img: '../3-feb19-photos-optimized/3.webp?v=3', caption: '1095 dÃ­as juntos.' },
            { id: 4, img: '../3-feb19-photos-optimized/4-gomi.webp?v=3', caption: 'Celebrando a la cumpleaÃ±era mÃ¡s guapa del condado. El pastel es secundario, tÃº eres el verdadero regalo.' },
            { id: 5, img: '../3-feb19-photos-optimized/5-dinamos.webp?v=3', caption: 'El aire falta aquÃ­ arriba, pero tÃº me robas el aliento.' },
            { id: 6, img: '../3-feb19-photos-optimized/6-italiano.webp?v=3', caption: 'La pasta estaba al dente, pero tÃº estÃ¡s al punto de perfecciÃ³n.' },
            { id: 7, img: '../3-feb19-photos-optimized/7-fancy.webp?v=3', caption: 'HabÃ­a mil luces esa noche, pero ninguna brillaba tanto como nosotros dos juntos.' },
            { id: 8, img: '../3-feb19-photos-optimized/8.webp?v=3', caption: 'POV: Sales con la mujer mÃ¡s bonita del planeta.' },
            { id: 9, img: '../3-feb19-photos-optimized/9-aburrida.webp?v=3', caption: 'Incluso esperando mesa te ves DIVINA. Â¿CÃ³mo le haces para que hasta el aburrimiento te quede bien?' },
            { id: 10, img: '../3-feb19-photos-optimized/10-selfie.webp?v=3', caption: 'Si somos raros, que sea juntos.' },
            { id: 11, img: '../3-feb19-photos-optimized/11-contacto-fisico.webp?v=3', caption: 'El contacto fÃ­sico no es negociable. Consideralo mi suscripciÃ³n premium a la felicidad.' },
            { id: 12, img: '../3-feb19-photos-optimized/12-texas.webp?v=3', caption: 'The steak was great, but you were definitely the best thing on the menu that night.' },
            { id: 13, img: '../3-feb19-photos-optimized/13.webp?v=3', caption: 'Tu sonrisa ilumina hasta mi noche mÃ¡s oscura.' },
            { id: 14, img: '../3-feb19-photos-optimized/14-sept.webp?v=3', caption: 'Gracias por seguirme el ritmo a cualquier plan.' },
            { id: 15, img: '../3-feb19-photos-optimized/15-luna.webp?v=3', caption: 'Le pedÃ­ la luna y ella decidiÃ³ venir conmigo.' },
            { id: 16, img: '../3-feb19-photos-optimized/16-camarones.webp?v=3', caption: 'Amor es dejarte el Ãºltimo camarÃ³n.' },
            { id: 17, img: '../3-feb19-photos-optimized/17-boda.webp?v=3', caption: 'Te veÃ­as tan hermosa esa noche que casi interrumpo la boda para pedirte que la nuestra fuera la siguiente.' },
            { id: 18, img: '../3-feb19-photos-optimized/18-boda.webp?v=3', caption: 'El mejor equipo de todas las fiestas.' },
            { id: 19, img: '../3-feb19-photos-optimized/19.webp?v=3', caption: "My spidey-sense is tingling... and it's definitely because of how good you look in that suit." },
            { id: 20, img: '../3-feb19-photos-optimized/20-spidercouple.webp?v=3', caption: 'No necesito superpoderes si te tengo a ti.' },
            { id: 21, img: '../3-feb19-photos-optimized/21-cowboys.webp?v=3', caption: 'El cowboy mÃ¡s suertudo del viejo oeste.' },
            { id: 22, img: '../3-feb19-photos-optimized/22-dune.webp?v=3', caption: "I'd cross the desert of Arrakis just to find water for you. My desert power is just loving you." },
            { id: 23, img: '../3-feb19-photos-optimized/23-weirdest.webp?v=3', caption: 'Un nivel de locura que solo yo entiendo.' },
            { id: 24, img: '../3-feb19-photos-optimized/24-tenis.webp?v=3', caption: 'Â¿Spider-man jugando tenis? Solo contigo.' },
            { id: 25, img: '../3-feb19-photos-optimized/25-cenacumple.webp?v=3', caption: 'El mejor regalo fue tenerte conmigo.' },
            { id: 26, img: '../3-feb19-photos-optimized/26.webp?v=3', caption: 'Contigo las escalas no pesan.' },
            { id: 27, img: '../3-feb19-photos-optimized/27.webp?v=3', caption: 'PrÃ³xima parada: MÃ¡s recuerdos juntos.' },
            { id: 28, img: '../3-feb19-photos-optimized/28.webp?v=3', caption: 'Vine por el oceanario, pero el pececito mÃ¡s lindo del agua eres tÃº.' },
            { id: 29, img: '../3-feb19-photos-optimized/29.webp?v=3', caption: 'Ni todo el oro de Cartagena vale lo que tÃº.' },
            { id: 30, img: '../3-feb19-photos-optimized/30.webp?v=3', caption: 'La belleza mÃ¡s grande que pisÃ³ ese lugar.' },
            { id: 31, img: '../3-feb19-photos-optimized/31.webp?v=3', caption: 'Reflejos de un viaje inolvidable.' },
            { id: 32, img: '../3-feb19-photos-optimized/32.webp?v=3', caption: '11 AM y todavÃ­a no desayunabamos.' },
            { id: 33, img: '../3-feb19-photos-optimized/33.webp?v=3', caption: 'QuÃ© chimba es estar contigo, parcera.' },
            { id: 34, img: '../3-feb19-photos-optimized/34.webp?v=3', caption: 'Â¿QuiÃ©n es esa seÃ±ora?' },
            { id: 35, img: '../3-feb19-photos-optimized/35.webp?v=3', caption: 'Cansados pero felices, como siempre.' },
            { id: 36, img: '../3-feb19-photos-optimized/36.webp?v=3', caption: 'El skyline de Cartagena no te llega ni a los talones.' },
            { id: 37, img: '../3-feb19-photos-optimized/37.webp?v=3', caption: 'Â¿HabÃ­a una vista atrÃ¡s? No me di cuenta.' },
            { id: 38, img: '../3-feb19-photos-optimized/38-2026.webp?v=3', caption: 'Un San ValentÃ­n que se queda en el alma.' },
            { id: 39, img: '../3-feb19-photos-optimized/39.webp?v=3', caption: 'Corriste 21km sin entrenar solo por amor. Eso es un 10/10 en lealtad y un 0/10 en instinto de supervivencia. Te amo, loca.' },
            { id: 40, img: '../3-feb19-photos-optimized/40.webp?v=3', caption: "No sÃ© quiÃ©n ganÃ³ el set, pero en el ranking de 'pareja con mÃ¡s flow' somos el #1." },
            { id: 41, img: '../3-feb19-photos-optimized/41.webp?v=3', caption: 'Entre uvas y besos.' },
            { id: 42, img: '../3-feb19-photos-optimized/42-fotos-postre.webp?v=3', caption: 'Â¿Mi pasiÃ³n? Tomarle fotos a mi postre. Â¿Mi obsesiÃ³n? La persona que se lo estÃ¡ comiendo.' },
            { id: 43, img: '../3-feb19-photos-optimized/43.webp?v=3', caption: 'Se busca nÃ¡ufrago para quedarse atrapado en esta isla (requisito: que se parezca a ti).' },
            { id: 44, img: '../3-feb19-photos-optimized/44.webp?v=3', caption: 'Un shot por MedellÃ­n, dos por nosotros y tres porque... bueno, tenemos sombrero.' },
            { id: 45, img: '../3-feb19-photos-optimized/45.webp?v=3', caption: 'Quisiera que el tiempo se detenga cuando te miro.' }
        ];

        // ---- SKIP PRELOADER ----
        const loader = document.getElementById('loader');
        loader.style.opacity = '0';
        setTimeout(() => {
            loader.style.display = 'none';
            const splash = document.getElementById('splash');
            splash.style.visibility = 'visible';
            splash.style.opacity = '1';
            setTimeout(() => {
                splash.style.opacity = '0';
                setTimeout(() => {
                    splash.style.visibility = 'hidden';
                    document.getElementById('viewport').style.opacity = '1';
                    document.querySelector('.scroll-hint').style.opacity = '1';
                    document.querySelector('.flip-hint').style.opacity = '1';
                }, 1000);
            }, 3000);
        }, 300);

        // ---- BUILD REVOLVER ----
        const revolver = document.getElementById('revolver');
        const itemCount = memories.length;

        // Get actual card height based on screen size (matches CSS media queries)
        const vw = window.innerWidth;
        const cardH = vw <= 360 ? 180 : (vw <= 500 ? 210 : 270);

        // Radius: place cards around a cylinder so they don't overlap
        const radius = Math.round((itemCount * cardH) / (2 * Math.PI));
        const angleStep = 360 / itemCount;

        memories.forEach((mem, i) => {
            const el = document.createElement('div');
            el.className = 'card';
            const angle = i * angleStep;
            el.style.transform = 'rotateX(' + angle + 'deg) translateZ(' + radius + 'px)';
            el.innerHTML = '<div class="card-flipper">' +
                '<div class="card-front">' +
                '<img src="' + mem.img + '" loading="lazy">' +
                '<div class="card-label">#' + mem.id + '</div>' +
                '</div>' +
                '<div class="card-back">' +
                '<img src="' + mem.img + '" class="card-back-img" loading="lazy">' +
                '<div class="card-back-overlay"></div>' +
                '<div class="close-btn"></div>' +
                '<p>' + mem.caption + '</p>' +
                '</div>' +
                '</div>';

            // Click to flip (desktop)
            el.addEventListener('click', function(e) {
                if (e.target.classList.contains('close-btn')) {
                    el.classList.remove('flipped');
                    e.stopPropagation();
                } else {
                    el.classList.toggle('flipped');
                }
            });

            revolver.appendChild(el);
        });

        // ---- ROTATION STATE (driven by wheel + touch, not native scroll) ----
        var rotation = 0;

        // Desktop: mouse wheel
        window.addEventListener('wheel', function(e) {
            e.preventDefault();
            rotation += e.deltaY * 0.05;
            revolver.style.transform = 'rotateX(' + (-rotation) + 'deg)';
        }, { passive: false });

        // Mobile: touch drag
        var touchStartY = 0;
        var touchActive = false;

        document.addEventListener('touchstart', function(e) {
            touchStartY = e.touches[0].clientY;
            touchActive = true;
        }, { passive: true });

        document.addEventListener('touchmove', function(e) {
            if (!touchActive) return;
            var touchY = e.touches[0].clientY;
            var delta = touchStartY - touchY;
            rotation += delta * 0.15;
            revolver.style.transform = 'rotateX(' + (-rotation) + 'deg)';
            touchStartY = touchY;
        }, { passive: true });

        document.addEventListener('touchend', function() {
            touchActive = false;
        }, { passive: true });

        // ---- CLOSE HINTS ----
        document.querySelectorAll('.hint-close').forEach(function(btn) {
            btn.addEventListener('click', function(e) {
                e.stopPropagation();
                var parent = btn.parentElement;
                parent.style.opacity = '0';
                setTimeout(function() { parent.style.display = 'none'; }, 1500);
            });
        });
    </script>
</body>

</html>
